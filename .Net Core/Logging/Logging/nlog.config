<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	  autoReload="true" 
	  internalLogLevel ="Info" 
	  internalLogFile="${currentdir}\logs\logs.txt">
	<extensions>
		<add assembly="NLog.Web.AspNetCore" />
		<add assembly="NLog.Targets.MySql" />
	</extensions>
	
	
	<!-- the targets to write to -->
	<targets>
		<!-- write to file -->
		<target xsi:type="File"
				name="Trace" 
				fileName="${currentdir}\logs\Tace\${date:format=yyyy/MM/dd}.txt"
				layout="${longdate}|${event-properties:item=EventId_Id}|${uppercase:${level}}|${logger}|${message} ${exception:format=tostring}" />
	<!-- write to file -->
		<target xsi:type="File"
				name="Debug" 
				fileName="${currentdir}\logs\Debug\${date:format=yyyy/MM/dd}.txt"
				layout="${longdate}|${event-properties:item=EventId_Id}|${uppercase:${level}}|${logger}|${message} ${exception:format=tostring}" />
	<!-- write to file -->
		<target xsi:type="File"
				name="Information" 
				fileName="${currentdir}\logs\Information\${date:format=yyyy/MM/dd}.txt"
				layout="${longdate}|${event-properties:item=EventId_Id}|${uppercase:${level}}|${logger}|${message} ${exception:format=tostring}" />
	<!-- write to file -->
		<target xsi:type="File"
				name="Warning" 
				fileName="${currentdir}\logs\Warning\${date:format=yyyy/MM/dd}.txt"
				layout="${longdate}|${event-properties:item=EventId_Id}|${uppercase:${level}}|${logger}|${message} ${exception:format=tostring}" />
	<!-- write to file -->
		<target xsi:type="File"
				name="Error" 
				fileName="${currentdir}\logs\Error\${date:format=yyyy/MM/dd}.txt"
				layout="${longdate}|${event-properties:item=EventId_Id}|${uppercase:${level}}|${logger}|${message} ${exception:format=tostring}" />
	<!-- write to file -->
		<target xsi:type="File"
				name="Critical" 
				fileName="${currentdir}\logs\Critical\${date:format=yyyy/MM/dd}.txt"
				layout="${longdate}|${event-properties:item=EventId_Id}|${uppercase:${level}}|${logger}|${message} ${exception:format=tostring}" />
		<target xsi:type="Database"
			name ="Database"
				connectionString="server=localhost;Database=nlog;user id=Admin;password=gs@123"
				dbProvider="MySql.Data.MySqlClient.MySqlConnection,MySql.Data"
				commandText="INSERT INTO nlog.logs(CreatedOn,Message,Level,Exception,StackTrace,logger,Url) values (@datetime,@msg,@level,@exception,@trace,@logger,@url)">
			<parameter name ="@datetime" layout="${date}"/>
			<parameter name ="@msg" layout="${message}"/>
			<parameter name ="@level" layout="${level}"/>
			<parameter name ="@exception" layout="${exception}"/>
			<parameter name ="@trace" layout="${stacktrace}"/>
			<parameter name ="@logger" layout="${logger}"/>
			<parameter name ="@url" layout="${aspnet-request-url}"/>
			
		</target>
	
	</targets>
	<!-- rules to map from logger name to target -->
	<rules>
			<logger name="*" levels="Trace" writeTo="Trace" />
			<logger name="*" levels="Debug" writeTo="Debug" />
			<logger name="*" levels="Info" writeTo="Information" />
			<logger name="*" levels="Warn" writeTo="Warning" />
			<logger name="*" levels="Error" writeTo="Error" />
			<logger name="*" levels="Fatal" writeTo="Critical" />
			<logger name="*" minlevel="Info" writeTo="Database" />
		
		
	</rules>
</nlog>